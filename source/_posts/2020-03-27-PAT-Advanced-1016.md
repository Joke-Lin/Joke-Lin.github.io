---
title: PAT Advanced 1016 Phone Bills（排序）
date: 2020-03-27
tags:
- C/C++
- PAT
categories:
- DSAA
---

## 题目描述

[题目地址](https://pintia.cn/problem-sets/994805342720868352/problems/994805493648703488)

提交了整整一个下午。。。

再次吐槽PAT的题目描述，很多时候都是迷迷糊糊的，很多地方没有说清楚。

这道题一个巨大的坑：**没有符合条件的时间对时，不输出该用户信息**

太坑了。。

<!-- more -->

## 题目思路

题目还是比较简单的，简单的排序即可，可以全部存为一个数组，然后先按名字排序，在名字相同时按时间排序即可。此处采用 C++ Map 分类。对每一个顾客的时间进行排序。然后仅当 当前时间为 `on-line`紧跟着的下一个时间为`off-line` 为有效时间对。

仅当存在有效时间对时才有对应的输出。

对于一段时间的计费，可以分别计算单独时间到`00:00:00`的费用，然后相减即可，一个很好的思路。

代码如下：

```c++
#include <cstdio>
#include <vector>
#include <algorithm>
#include <cstring>
#include <string>
#include <iostream>
#include <map>
#include <cmath>

//#define LOCAL

using namespace std;

struct Record {
    int t, mon, day, hour, mins;
    bool type;  // 1: on-line 0: off-line
    bool operator < (const Record& another) const {
        return t < another.t;
    }
};

map<string, vector<Record>> calls;
int price_table[24], price_day = 0;

ll getCost(Record &tar) {
    int d = tar.day, h = tar.hour, m = tar.mins;
    ll cost = d * price_day;
    for(int i = 0;i < h;i++) {
        cost += price_table[i]*60;
    }
    cost += price_table[h]*m;
    return cost;
}

void printTime(Record &tar) {
    printf("%02d:%02d:%02d", tar.day, tar.hour, tar.mins);
}

int main() {
#ifdef LOCAL
    freopen("./in.txt", "r", stdin);
#endif
    for(int i = 0;i < 24;i++) {
        scanf("%d", price_table+i);
        price_day += price_table[i]*60;
    }
    string customer, t, line;
    int n; scanf("%d", &n);
    for(int i = 0;i < n;i++) {
        cin >> customer;
        Record temp;
        scanf("%d:%d:%d:%d", &temp.mon, &temp.day, &temp.hour, &temp.mins);
        cin >> line;
        temp.type = line == "on-line";
        temp.t = 24*60*temp.day + 60*temp.hour + temp.mins; // 获取从00:00:00到此的分钟数
        calls[customer].push_back(temp);
    }
    for(auto i : calls) {
        sort(i.second.begin(), i.second.end());
        int size = i.second.size();
        float cost_all = 0;
        bool flag = false;  // 判断是否存在有效时间
        for(int j = 0;j < size - 1;j++) {
            if(i.second[j].type == true && i.second[j+1].type == false) {
                if(!flag) {
                    cout << i.first << " "; printf("%02d\n", i.second[0].mon);
                }
                printTime(i.second[j]);
                printf(" ");
                printTime(i.second[j+1]);
                float temp_cost = (getCost(i.second[j+1]) - getCost(i.second[j]))/100.0;
                printf(" %d $%.2f\n", i.second[j+1].t - i.second[j].t, temp_cost);
                cost_all += temp_cost;
                flag = true;
            }
        }
        if(flag)
            printf("Total amount: $%.2f\n", cost_all);
    }
    return 0;
}
```

